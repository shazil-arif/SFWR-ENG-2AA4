\documentclass[12pt]{article}

\usepackage{graphicx}
\usepackage{paralist}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{hhline}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{multicol}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{url}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}
\lstset{
  basicstyle=\ttfamily,
  mathescape
}

\oddsidemargin -10mm
\evensidemargin -10mm
\textwidth 160mm
\textheight 200mm
\renewcommand\baselinestretch{1.0}

\pagestyle {plain}
\pagenumbering{arabic}

\newcounter{stepnum}

%% Comments

\usepackage{color}

\newif\ifcomments\commentstrue

\ifcomments
\newcommand{\authornote}[3]{\textcolor{#1}{[#3 ---#2]}}
\newcommand{\todo}[1]{\textcolor{red}{[TODO: #1]}}
\else
\newcommand{\authornote}[3]{}
\newcommand{\todo}[1]{}
\fi

\newcommand{\wss}[1]{\authornote{blue}{SS}{#1}}

\title{Assignment 4, Two Dots game Specification}
\author{SFWR ENG 2AA4}

\begin {document}

\maketitle
This Module Interface Specification (MIS) document contains modules, types and
methods for implementing a game of Two Dots

\newpage

\section* {Color Module}

\subsection*{Module}

Color

\subsection* {Uses}

N/A

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Types}

Color = \{R, G, B, P, Y\}\\

\noindent \textit{//R stands for Red, G for green, B for blue, P for
  Purple, Y for yellow}

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{5cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
randomColor &  & Color & ~\\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {State Variables}

colors: color

\subsubsection* {State Invariant}

None

\subsubsection* {Access Routine Semantics}

\noindent randomColor():
\begin{itemize}
\item transition: none
\item output: $out :=$ randomVal()
\item exception: none
\end{itemize}


\subsection*{Local Functions}

\noindent randomVal(): Color\\
\noindent randomVal() $\equiv (i = 0 \implies $R $| i = 1 \implies$ G $| i = 2 \implies$ B $| i = 3 \implies$ P $| i = 4 \implies$ Y ) 
Where $i$ is a uniformly-distributed random number in the range $0 \leq i \leq 4$ \\

\newpage

\section* {Point ADT Module}

\subsection*{Template Module}

PointT

\subsection* {Uses}

N/A

\subsection* {Syntax}

\subsubsection* {Exported Types}

\textcolor{blue}{PointT = ?}

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | l |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
PointT & $\mathbb{Z}$, $\mathbb{Z}$ & PointT & \\
\hline
row & ~ & $\mathbb{Z}$ & ~\\
\hline
col & ~ & $\mathbb{Z}$ & ~\\
\hline
translate & $\mathbb{Z}$, $\mathbb{Z}$ & PointT & ~\\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {State Variables}

$r$: \textcolor{blue}{$\mathbb{Z}$}\\
$c$: \textcolor{blue}{$\mathbb{Z}$}\\

\subsubsection* {State Invariant}

None

\subsubsection* {Assumptions}

The constructor PointT is called for each object instance before any other
access routine is called for that object.  The constructor cannot be called on
an existing object.

\subsubsection* {Access Routine Semantics}

PointT($row, col$):
\begin{itemize}
\item transition: \textcolor{blue}{$r := row, c := col$}

\item output: $out := \mathit{self}$
\item exception: None
\end{itemize}

\noindent row():
\begin{itemize}
\item output: $out := r$
\item exception: None
\end{itemize}

\noindent col():
\begin{itemize}
\item \textcolor{blue}{output: $out := c$}
\item exception: None
\end{itemize}

\newpage

\section* {Generic Board Module}

\subsection* {Generic Template Module}

Board(T)

\subsection* {Uses}

PointT

\subsection* {Syntax}

\subsubsection* {Exported Types}

Board(T) = ?

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
Board & $\mathbb{N},\mathbb{N}$ & Board & IllegalArgumentException\\
\hline
set & PointT, T & ~ & IndexOutOfBoundsException\\
\hline
get & PointT & T & IndexOutOfBoundsException\\
\hline
getNumRow & ~ & $\mathbb{N}$ & \\
\hline
getNumCol & ~ & $\mathbb{N}$ & \\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {State Variables}

$s$: seq of (seq of T)\\
nRow: $\mathbb{N}$\\
nCol: $\mathbb{N}$

\subsubsection* {State Invariant}

None

\subsubsection* {Assumptions}

\begin{itemize}
\item The Board(T) constructor is called for each object instance before any
other access routine is called for that object.  The constructor can only be
called once.
\item $s[i][j]$ means the ith row and the jth column.  The 0th row is at the top of the grid and the 0th column is at the leftmost side of the grid.
\end{itemize}

\subsubsection* {Access Routine Semantics}

Board($row$, $col$):
\begin{itemize}
\item \textcolor{blue}{transition (note that the list does not enforce an \emph{order} in which the transitions occur, only the transitions that must occur): \begin{enumerate} \item $nRow := row$ \item $nCol := col$\end{enumerate}}

\item output: $\mathit{out} := \mathit{self}$
\item \textcolor{blue}{exception: \\
exc $:=$ (row $\leq$ 0) $\lor$ (col $\leq$ 0) $\implies$ IllegalArgumentException}
\end{itemize}

\noindent set($p, v$):
\begin{itemize}
\item transition: \textcolor{blue}{$s[p.row()][p.col()] = v$}
\item exception:\\ \textcolor{blue}{$\lnot$ validPoint(p)$\implies$ IndexOutOfBoundsException}
\end{itemize}

\noindent get($p$):
\begin{itemize}
\item output: \textcolor{blue}{$out := s[p.row()][p.col()]$}
\item exception:\\ \textcolor{blue}{$\lnot$ validPoint(p)$\implies$ IndexOutOfBoundsException}
\end{itemize}

\noindent getNumRow():
\begin{itemize}
\item output: $out := \mbox{nRow}$
\item exception: None
\end{itemize}

\noindent getNumCol():
\begin{itemize}
\item output: $out := \mbox{nCol}$
\item exception: None
\end{itemize}

\subsection*{Local Functions}

\noindent validRow: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validRow($r$) $\equiv r \geq 0 \land (r < $ nRow)} \\

\noindent validCol: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validCol($c$) $\equiv (c \geq 0) \land (c < $ nCol)} \\


\noindent validPoint: $\mbox{PointT} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validPoint($p$) $\equiv$ validCol(p.col()) $\land$ validRow(p.row())}

\newpage

\section* {BoardMoves Module}

\subsection* {Template Module}

\noindent \textcolor{blue}{BoardMoves is seq of PointT}

\subsubsection* {Considerations}
When using in Java. Use Arraylist parameterized by PointT


\newpage

\section* {TwoDotsBoard Module}

\subsection* {Template Module}

\noindent \textcolor{blue}{TwoDotsBoard is Board(Color)}

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
validateMoves & BoardMoves & $\mathbb{B}$& \\
\hline
updateBoard & BoardMoves &  & \\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {Access Routine Semantics}

\noindent validateMoves(b): 
\begin{itemize}
\item \textcolor{blue}{output : out $:= |b| > 1 \land \forall ( p : PointT | p \in b : validPoint(p)) \land validPath(b) \land isDistinct(b)$}
\item exception: None
\end{itemize}

\noindent updateBoard(b): 
\begin{itemize}
\item \textcolor{blue}{output : out $ := $ None}
\item \textcolor{blue}{transition : s $ := p\forall (p : PointT | p \in b  \forall(i : \mathbb{N} | i \in [p.row()..1]) )$ }
\item exception: None
\end{itemize}

\subsection*{Local Functions}

\noindent validRow: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validRow($r$) $\equiv r \geq 0 \land (r < $ nRow)} \\

\noindent validCol: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validCol($c$) $\equiv (c \geq 0) \land (c < $ nCol)} \\


\noindent validPoint: $\mbox{PointT} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validPoint($p$) $\equiv$ validCol(p.col()) $\land$ validRow(p.row())}\\

\noindent isDistinct: BoardMoves $\rightarrow \mathbb{B}$\\
\noindent isDistinct($b$) $\equiv$ $\forall(i : \mathbb{N}| i \in [0..|b|-1] : \forall (j : \mathbb{N} | j \in [(i+1)..|b|-1]) : \lnot (b[i].row() = b[j].row()) \land (b[i].col() = b[j].col()) )$  \\


\noindent validPath: $\mbox{BoardMoves} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validPath($b$) $\equiv \forall(i : \mathbb{N} | i \in [0..|b|-2] : isAdjacent(b,i,i+1) \land sameColor(b,i,i+1)  ) \land $}\\
 
\noindent sameColor : BoardMoves $\times \mathbb{N} \times \mathbb{N} \rightarrow \mathbb{B} $\\
\noindent sameColor($b,i,j$) $\equiv s[b[i].row()][b[i].col()] = s[b[j].row()][b[j].col()]$\\

\noindent isAdjacent: BoardMoves $\times \mathbb{N} \times \mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{isAdjacent($b,i,j$) $\equiv b[i].row() = b[j].row() \land b[i].col() = b[j].col() + 1$\\
$\lor$  $b[i].row() = b[j].row() \land b[i].col() = b[j].col() - 1$\\
$\lor$  $b[i].row() = b[j].row() - 1 \land b[i].col() = b[j].col()$\\
$\lor$  $b[i].row() = b[j].row() + 1 \land b[i].col() = b[j].col()$ }\\


\newpage

\section* {Strategy Interface Module}

\subsection* {Interface Module}

\noindent {Strategy}

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
play & TwoDotsBoard & & \\
\hline
\end{tabular}

\newpage

\section* {BoardView Module}

\subsection* {Template Module}

\noindent \textcolor{blue}{BoardView}

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
printBoard & TwoDotsBoard & $\mathbb{B}$& \\
\hline
modePrompt &  & Strategy & \\
\hline
getInput &  & BoardMoves & \\
\hline
closeStream &  &  & \\
\hline
printMsg & $msg : string$ &  & \\
\hline

\end{tabular}

\subsection* {Semantics}

\subsubsection* {Environment variables}
\noindent $s$ : 2D sequence of pixels displayed on a standard Unix Shell/console\\
\noindent $r$ : an object to write text out on a standard Unix Shell/console\\

\subsubsection* {Access Routine Semantics}

\noindent printBoard($b$): 
\begin{itemize}
\item transition $s:=$ Modify the Console so that the TwoDotsBoard b is printed in a tabular manner. The contents of each row from $b$ should
be on individual line. Their should be horizontal and vertical numbering indicating each row and column from one upto and including the row and column size of the board
\item exception: None
\end{itemize}

\noindent modePrompt(): 
\begin{itemize}
\item transition :
\begin{itemize}
\item $s:=$ Modify the console to print a message asking the user to enter ``T'' for the timed version of the game and ``M'' for the mode of the game with a set number of moves
\item $r$:= read a single line of text from the standard input. Store this value in memory and then determine what to output as follows:\\
If the line read in is ``T'' or ``t'' output : out $ := $ new TimedStrategy()\\
If the line read in is ``M'' or ``m'' output: out $ := $ new MovesStrategy()\\
Otherwise keep reading a line from the standard input until one of the above two conditions are met
\end{itemize}
\item exception: None
\end{itemize}

\noindent getInput(): 
\begin{itemize}
\item transition :
\begin{itemize}
\item $r$:= read a single line of text from the standard input to determine the coordinates of the dots the user would like to eliminate.
Note that the desired input format is u,v w,x y,z .... These are pairs of natural numbers with a comma between them and each pair is separated by a space. Store this value in memory and then determine what to output as follows:\\
If the line read in is in the correct format then $output: out :=$ new BoardMoves() containing the pairs of integers\\
Otherwise keep reading a line from the standard input until one of the above conditions are met
\end{itemize}
\end{itemize}

\noindent closeStream(): 
\begin{itemize}
\item transition : $s$:= close the input stream
\end{itemize}

\noindent printMsg($msg : string$): 
\begin{itemize}
\item transition : $s$:= Modify the output console to print out text contain in the string $msg$
\end{itemize}

\subsection* {Considerations}
\noindent In java, closing the input stream corresponds to closing the System.in object


\newpage

\section* {BoardController Module}

\subsection* {Template Module}

\noindent {BoardController}

\subsection* {Uses}

TwoDotsBoard, BoardView, Color, PointT, BoardMoves

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
BoardController & TwoDotsBoard, BoardView & BoardController& \\
\hline
get & PointT & Color & \\
\hline
set & PointT, Color &  & \\
\hline
validateMoves & BoardMoves & $\mathbb{B}$ & \\
\hline
updateBoard & BoardMoves &  & \\
\hline
updateView &   &  & \\
\hline
printMsg & $msg : string$ &  & \\
\hline
modePrompt &  & Strategy & \\
\hline
closeViewStream &  &  & \\
\hline
getInput &  & BoardMoves & \\
\hline

\end{tabular}

\subsection* {Semantics}


\subsubsection* {State variables}
\noindent $m$ : TwoDotsBoard
\noindent $v$ : BoardView



\subsubsection*{State invariant}
\noindent None

\subsubsection* {Access Routine Semantics}


\noindent BoardController($model$,$view$)
\begin{itemize} 
\item output: out := self
\item transition: $m:=$ model, $v:=$ view
\item exceptions: none
\end{itemize}

\noindent get(p)
\begin{itemize}
\item output : $out := $ m.get(p)
\item transition: none
\item exceptions: none
\end{itemize}

\noindent set(p,c)
\begin{itemize}
\item transition: m.set(p,c)
\item exception : none
\end{itemize}

\noindent validateMoves(b)
\begin{itemize}
\item output : $out := $ m.validateMoves(b)
\end{itemize}

\noindent updateBoard(b)
\begin{itemize}
\item transition: m.updateBoard(b)
\end{itemize}

\noindent updateView()
\begin{itemize}
\item transition: v.printBoard(m)
\end{itemize}

\noindent printMsg($msg : string$): 
\begin{itemize}
\item transition view.printMsg($msg$)
\end{itemize}


\noindent modePrompt(): 
\begin{itemize}
\item output: $out := $ v.modePrompt()
\end{itemize}

\noindent closeViewStream(): 
\begin{itemize}
\item transition :v.closeStream()
\end{itemize}


\noindent getInput(): 
\begin{itemize}
\item output: if (m.validateMoves(v.getInput())) then $out:=$ else $out :=$ getInput()
\end{itemize}


\newpage

\section* {StrategyGameMode Module}

\subsection* {Template Module inherits Strategy}

\noindent {StrategyGameMode}

\subsection{Uses}
Strategy, BoardView, BoardController, BoardMoves, TwoDotsBoard

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
play & TwoDotsBoard & & \\
\hline
startUp & TwoDotsBoard & & \\
\hline
checkWin & & & \\
\hline
canContinue &  & & \\
\hline
updateData &  & & \\
\hline
introMsg & & & \\
\hline
\end{tabular}

\subsection* {Semantics}


\subsubsection* {State variables}
\noindent $c$ : BoardController
\noindent $v$ : BoardView
\noindent $moves$ : BoardMoves


\subsubsection*{State invariant}
\noindent None

\subsubsection* {Access Routine Semantics}

\noindent play(b)
\begin{itemize}
\item transition
\end{itemize}

\subsection* {Consideration}
\noindent In Java, this module would be implemented as an abstract class that implements the Strategy interface. Unimplemented methods are ones that are abstract methods and will be overridden by its children\\
\noindent This is the best that could be done to convey the idea of a ``abstract class'' given that MIS does not have the notion of an abstract class, following Dr Smith's advice to use Inheritance and leave a note for reader. Source: \href{https://avenue.cllmcmaster.ca/d2l/le/296632/discussions/threads/1286234/View?groupFilterOption=0&searchText=abstract} {Here (will have to login to avenue)}

\newpage

\section* {MovesStrategy Module}

\subsection* {Template Module inherits StrategyGameMode}

\noindent {MovesStrategy}

\subsection{Uses}
StrategyGameMode, BoardView, BoardController, BoardMoves, TwoDotsBoard

\subsection* {Syntax}

\subsubsection* {Exported Constants}

None

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
play & TwoDotsBoard & & \\
\hline
startUp & TwoDotsBoard & & \\
\hline
checkWin & & & \\
\hline
canContinue &  & & \\
\hline
updateData &  & & \\
\hline
introMsg & & & \\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {Environment variables}
\noindent $sys$ : BoardController\\


\subsubsection* {State variables}
\noindent $moveCount$ : $\mathbb{N}$\\
\noindent $target$ : $\mathbb{N}$\\


\subsubsection*{State invariant}
\noindent None

\subsubsection* {Access Routine Semantics}

\noindent play(b)
\begin{itemize}
\item transition
\end{itemize}

\newpage




\section* {DEM Module}

\subsection* {Template Module}

DemT is Seq2D($\mathbb{Z}$)

\subsection* {Syntax}

\subsubsection* {Exported Access Programs}

\begin{tabular}{| l | l | l | p{6cm} |}
\hline
\textbf{Routine name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}\\
\hline
total & & $\mathbb{Z}$ & \\
\hline
max &  & $\mathbb{Z}$ & \\
\hline
ascendingRows & & $\mathbb{B}$ & \\
\hline
\end{tabular}

\subsection* {Semantics}

\subsubsection* {Access Routine Semantics}

\noindent total(): 
\begin{itemize}
\item \textcolor{blue}{output : out $:= +(x, y : \mathbb{N} |$ validRow($x$) $\land$ validCol($y$) : $s[x][y]$)}
\item exception: None
\end{itemize}

\noindent max():
\begin{itemize}
\item \textcolor{blue}{output: out $:=$ $M$ such that $\forall (x : $ Seq of $\mathbb{Z}$ $| x \in s : \forall (y : \mathbb{Z} | y \in x : M \geq y ))  \land (\exists i : \mathbb{N} | validRow(i) : M \in s[i] $)}
\item exception: None
\end{itemize}

\noindent ascendingRows():
\begin{itemize}
\item \textcolor{blue}{output:out $:= \forall (i : \mathbb{N} | i \in [0..|s|-2] : sum(s[i]) < sum(s[i+1])) $}
\item exception: None
\end{itemize}

\subsection*{Local Functions}

\noindent validRow: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validRow($n$) $\equiv$ ($n \geq 0$) $\land$ ($n < $ nRow)}\\

\noindent validCol: $\mathbb{N} \rightarrow \mathbb{B}$\\
\noindent \textcolor{blue}{validCol($c$) $\equiv$ ($c \geq 0$) $\land$ ($c < $ nCol)}\\
  
\noindent sum: Seq of $\mathbb{Z} \rightarrow \mathbb{Z}$\\
\noindent \textcolor{blue}{sum($s$) $\equiv$ $(+x : \mathbb{Z} | x \in s: x)$}

\newpage


  
\end {document}